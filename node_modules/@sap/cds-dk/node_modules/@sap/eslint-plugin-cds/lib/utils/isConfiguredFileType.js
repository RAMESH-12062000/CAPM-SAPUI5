const { FILES, MODEL_FILES } = require('../constants')

const regexByFileType = {
  FILES: globArrayToRegex(FILES),
  MODEL_FILES: globArrayToRegex(MODEL_FILES)
}

/**
 * Checks whether the given filePath matches a regex `files`
 * @param {string} filePath
 * @returns boolean
 */
module.exports = (filePath, fileType) => {
  const isValid = regexByFileType[fileType].test(filePath)
  return isValid
}

function globArrayToRegex (arr) {
  return new RegExp(`${arr.map((e) => e.replace('*', '')).join('$|')}$`)
}
