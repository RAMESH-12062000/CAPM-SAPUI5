/**
 * Searches for ESLint config file types (in order or precedence)
 * and returns corresponding directory (usually project's root dir)
 * https://eslint.org/docs/user-guide/configuring#configuration-file-formats
 * @param {string} currentDir start here and search until root dir
 * @returns {string} dir containing ESLint config file (empty if not exists)
 */

const fs = require('fs')
const path = require('path')

module.exports = (currentDir = '.') => {
  const configFiles = [
    '.eslintrc.js',
    '.eslintrc.cjs',
    '.eslintrc.yaml',
    '.eslintrc.yml',
    '.eslintrc.json',
    '.eslintrc',
    'package.json'
  ]
  let configDir = path.resolve(currentDir)
  while (configDir !== path.resolve(configDir, '..')) {
    for (const configFile of configFiles) {
      const configPath = path.join(configDir, configFile)
      if (fs.existsSync(configPath) && fs.statSync(configPath).isFile()) {
        return configPath
      }
    }
    configDir = path.join(configDir, '..')
  }
  return ''
}
