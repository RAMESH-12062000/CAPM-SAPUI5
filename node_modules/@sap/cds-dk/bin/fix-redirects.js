const [arg0, arg1, _, ...args] = process.argv  // eslint-disable-line no-unused-vars
const cds = require('../lib/cds')
const files = cds.resolve(args.length ? args : '*')
process.argv = [ arg0, arg1, 'ria', ...files ]

console.log ('[cds] - searching for ambiguous redirects in', files)
const log = console.log; console.log = (...args) => {
  if (!log.found) log (log.found = '> found ambiguous redirects in these models -> please fix as follows:\n')
  log (...args)
}

require(require.resolve ('@sap/cds-compiler/bin/cdsv2m', {paths: [ cds.home, process.cwd(), __dirname ]}))

module.exports = ()=>{}
